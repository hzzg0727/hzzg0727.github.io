<!-- # FDTD Note: LSF Language -->
<h2 id="useful-commands-in-scriptprompt">Useful commands in <code class="language-plaintext highlighter-rouge">ScriptPrompt</code></h2>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">clear</span><span class="p">;</span>  <span class="c1"># clear all the variables in the workspace
</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">clear</span> <span class="n">a</span><span class="p">;</span>  <span class="c1"># clear variable a
</span>
<span class="n">clc</span><span class="p">;</span>  <span class="c1"># clear all the commands in the window
</span></code></pre></div></div>

<h2 id="variables">Variables</h2>
<h3 id="variable-types">Variable types</h3>
<p>Different types of variable a available in Lumerical’s scripting:</p>
<ul>
  <li>Strings can be used to define a file name, for instance, or a material.</li>
  <li>Numbers can be used to define dimensions, wavelength, etc.</li>
  <li>Arrays or matrices can be used, for instance, to define a frequency vector or to store a field profile.</li>
  <li>Structure array and cell array can store any type of data elements.</li>
  <li>Matrix datasets contain a data without spatial parameters</li>
  <li>Rectilinear datasets contain data with spatial information from a ectilinear grid (such as the FDTD mesh).</li>
  <li>Unstructured spatial datasets can be used to store data with spatial information on a finite element mesh (for instance, a calculation result from DEVICE) and arbitrary unstructured datasets can store any kind of data type.</li>
</ul>

<p><em>Note:</em></p>
<ul>
  <li>Datasets are typically used to store results from monitors.</li>
  <li>Cell arrays have a defined number of elements.</li>
  <li>Cell matrixes are not supported.</li>
  <li>Array is special matrix (1 * N or N * 1 matrix).</li>
</ul>

<h3 id="predefined-constants">Predefined constants</h3>
<p><img src="/assets/images/20221005-FDTD-lsf-1.png" alt="1" /></p>
<ul>
  <li>endl - “\n”</li>
</ul>

<h3 id="prinf-the-values">Prinf the values</h3>
<p>Use <code class="language-plaintext highlighter-rouge">print()</code> or <code class="language-plaintext highlighter-rouge">?</code> to see the value of variables.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="c1"># &gt; result:
# &gt; 1
</span><span class="err">?</span><span class="n">a</span><span class="p">;</span>
<span class="c1"># &gt; result:
# &gt; 1
</span></code></pre></div></div>

<h3 id="initialization-of-variables">Initialization of variables</h3>
<p>Use operator <code class="language-plaintext highlighter-rouge">=</code> to initialize the variables.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">string_</span> <span class="o">=</span> <span class="s">"Rectangle"</span><span class="p">;</span>

<span class="n">number_</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="n">array1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>  <span class="c1"># 1*3 
</span><span class="n">array2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">;</span> <span class="mi">3</span><span class="p">;</span> <span class="mi">5</span><span class="p">];</span>  <span class="c1"># 3*1 
</span><span class="n">array3</span> <span class="o">=</span> <span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">;</span>  <span class="c1"># equal to [1; 3; 5]
</span><span class="n">array4</span> <span class="o">=</span> <span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="mi">1</span><span class="p">;</span>  <span class="c1"># [5, 3, 1]
</span><span class="n">array5</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>  <span class="c1"># Create an array with 3 numebrs from 1 to 5.
</span>
<span class="n">matrix1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">;</span> 
           <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">;</span>
           <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">];</span>  <span class="c1"># 3*2
</span><span class="n">matrix2</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>  <span class="c1"># Use the “matrix” and the “zeros” functions to create an array filled with 0.
</span><span class="n">matrix3</span> <span class="o">=</span> <span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>  <span class="c1"># Use the “ones” function to create an array filled with ones.
</span>
<span class="n">struct_</span> <span class="o">=</span> <span class="n">struct</span><span class="p">;</span> <span class="c1"># To create a structure array, use the "struct" command.
</span><span class="n">struct_</span><span class="p">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1"># Add and access the structure array’s elements using the “.” operator.
</span><span class="n">struct_</span><span class="p">.</span><span class="n">b</span> <span class="o">=</span> <span class="s">"Rectangle"</span><span class="p">;</span>

<span class="n">cell_</span> <span class="o">=</span> <span class="n">cell</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>  <span class="c1"># to create a cell array, use the "cell" command and specify the number of elements.
</span><span class="n">cell_</span><span class="p">{</span><span class="mi">1</span><span class="p">}</span> <span class="o">=</span> <span class="s">"String"</span><span class="p">;</span>  <span class="c1"># The elements can be accessed using "{}" and the index of the element.
</span><span class="n">cell_</span><span class="p">{</span><span class="mi">2</span><span class="p">}</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>  <span class="c1"># The elements can be accessed using "{}" and the index of the element.
</span></code></pre></div></div>

<h3 id="element-access">Element access</h3>
<p>The matrix(array)’s elements can be accessed using operator <code class="language-plaintext highlighter-rouge">()</code> with their index. Note the index starts at <strong>1</strong> and not 0.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">matrix1</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="k">print</span><span class="p">(</span><span class="n">matrix1</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
<span class="c1"># &gt; result: 
# &gt; 0
</span></code></pre></div></div>

<p>The structure array’s elements can be accessed using the <code class="language-plaintext highlighter-rouge">.</code> operator.</p>

<p>The cell’s elements can be accessed using <code class="language-plaintext highlighter-rouge">{}</code> and the index of the element.</p>

<h3 id="operations">Operations</h3>
<ul>
  <li>num2str()</li>
  <li>str2num()</li>
  <li>unwrap(): remove the changes of more than $2\pi$ from the phase that can be got with the angle function.</li>
  <li>All the angles are expressed in radians in these functions.</li>
  <li>When using mathematical functions on matrixex, the function is applied on each element of the matrixes.</li>
  <li>mult(): matrix multiplication.</li>
  <li>find(): find a value in arrays or matrixes.</li>
  <li>findpeaks(): find array peaks.</li>
  <li>logical operators (pay attention to function <code class="language-plaintext highlighter-rouge">almostequal()</code>)</li>
</ul>

<p><img src="/assets/images/20221005-FDTD-lsf-2.png" alt="2" /></p>

<h2 id="simulation-objects">Simulation objects</h2>
<h3 id="simulation-modes">Simulation modes</h3>
<p>To add a simulation object and set its properties, you first have to be in layoutmode.</p>

<p>You can do the same by using <code class="language-plaintext highlighter-rouge">layoutmode</code>. It returns ‘1’ if you are in layoutmode and ‘0’ when in analysis mode.</p>

<p>To set the simulation into layoutmode, you can use <code class="language-plaintext highlighter-rouge">switchtolayout</code> command.</p>

<h3 id="location-group-scope-in-the-objects-tree">Location (group scope) in the objects tree</h3>
<p>Default group scope is <code class="language-plaintext highlighter-rouge">model</code>, which is the root of the object tree.</p>

<p>When you add an object using script, it is placed under the current group scope.</p>

<p>Use command <code class="language-plaintext highlighter-rouge">groupscope("::model::NAME")</code> to go into one group named “NAME” or <code class="language-plaintext highlighter-rouge">groupscope("NAME")</code> if in <code class="language-plaintext highlighter-rouge">model</code> scope now.</p>

<h3 id="add-objects">Add objects</h3>
<p>Command: <code class="language-plaintext highlighter-rouge">addOBJECT_TYPE_NAME</code> if the name of the object’s type is “OBJECT_TYPE_NAME”. For instance, <code class="language-plaintext highlighter-rouge">addrect</code></p>

<h3 id="getset-properties-of-objects">Get/Set properties of objects</h3>
<p>To set the properties of an object, you first have to select it and then set the properties. But when you add an object, it is automatically selected as shown here with addcircle. So there is no need to select the object if you are to set its properties right after adding it.</p>

<p>How to select objects?</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">select("NAME")</code>: select the object named “NAME”.</li>
  <li><code class="language-plaintext highlighter-rouge">shiftselect("NAME")</code>: select new object named “NAME” while keeping the current selected objects.</li>
  <li><code class="language-plaintext highlighter-rouge">selectall()</code>: select all the objects.</li>
  <li><code class="language-plaintext highlighter-rouge">selectpartial("PNAME")</code>: select objects with the partial name “PNAME”.</li>
</ul>

<p>How to set property?</p>
<ul>
  <li>Use command <code class="language-plaintext highlighter-rouge">set("PROPERTY_NAME", VALUE)</code> to set the property named “PROPERTY_NAME” of selected objects with value represented by <code class="language-plaintext highlighter-rouge">VALUE</code>.</li>
  <li>Use command <code class="language-plaintext highlighter-rouge">setnamed("OBJECT_NAME", "PROPERTY_NAME", VALUE)</code> to set the property named “PROPERTY_NAME” of the object named “OBJECT_NAME” with value represented by <code class="language-plaintext highlighter-rouge">VALUE</code>.</li>
</ul>

<p>How to get property?</p>
<ul>
  <li>Use command <code class="language-plaintext highlighter-rouge">get("PROPERTY_NAME", VALUE)</code> to get the property named “PROPERTY_NAME” of selected objects.</li>
  <li>Use command <code class="language-plaintext highlighter-rouge">getnamed("OBJECT_NAME", "PROPERTY_NAME")</code> to get the property named “PROPERTY_NAME” of the object named “OBJECT_NAME”.</li>
</ul>

<h2 id="running-simulations">Running simulations</h2>
<h3 id="running-a-single-simulation">Running a single simulation</h3>
<p>To start a simulation, simply use the command <code class="language-plaintext highlighter-rouge">run</code>. It will launch the current project using the resources set in the resource manager.</p>

<p>Once the simulation is finished, the project is in analysis mode. Modification of any simulation settings is not allowed in this mode.So, if you want to change some of the settings for another simulation, you first need to get back to layout mode, using the command <code class="language-plaintext highlighter-rouge">switchtolayout</code>. Note you can use the command <code class="language-plaintext highlighter-rouge">layoutmode</code> to check if the project is in layout or analysis mode. It returns ‘1’ if you are in layoutmode and ‘0’ when in analysis mode.</p>

<h3 id="running-multiple-simulations-using-the-job-manager">Running multiple simulations using the job manager</h3>
<p><code class="language-plaintext highlighter-rouge">The job manager</code> allows you to run concurrent calculations using the resources set in the resource manager.</p>

<p>Commands:</p>
<ul>
  <li>Use command <code class="language-plaintext highlighter-rouge">addjob("FILENAME")</code> to add the specified project named “FILENAME” to the queue of simulations to be run.</li>
  <li>Use command <code class="language-plaintext highlighter-rouge">clearjobs</code> to remove all jobs from the queue.</li>
  <li>Use command <code class="language-plaintext highlighter-rouge">runjobs</code> to run all the jobs in the queue.</li>
</ul>

<p>Notes:</p>
<ul>
  <li>The job manager can be used to run a parameter sweep by creating all the simulation files and add them to the queue firstly and then running the jobs in the queue.</li>
  <li><em>(Advantage)</em> The job manager can run more than 1 simulation at a time.</li>
</ul>

<h3 id="running-parameter-sweep-and-optimization">Running parameter sweep and optimization</h3>
<p>When using parameter sweep, the selected task is run by first creating simulation files corresponding to the sweep parameter values and then adding them to the job manager.</p>

<p>Commands:</p>
<ul>
  <li>Use command <code class="language-plaintext highlighter-rouge">runsweep("TASKNAME")</code> to start the specified task named “TASKNAME” in the Optimizations and Sweeps window.</li>
  <li>Use command <code class="language-plaintext highlighter-rouge">runsweep</code> to start all the tasks.</li>
</ul>

<h2 id="accessing-and-visualizing-simulation-results">Accessing and visualizing simulation results</h2>
<h3 id="accessing-simulation-results">Accessing simulation results</h3>
<p>There are two types of data available in an object: <code class="language-plaintext highlighter-rouge">results</code> and <code class="language-plaintext highlighter-rouge">rawdata</code>. While <code class="language-plaintext highlighter-rouge">results</code> contains datasets formed by related data, <code class="language-plaintext highlighter-rouge">rawdata</code> contains individual data elements in matrix form. In comparison to <code class="language-plaintext highlighter-rouge">rawdata</code>, <code class="language-plaintext highlighter-rouge">results</code> have the advantage that they can be opened in the visualizer to generate plots with proper axes.</p>

<p>Basic commands:</p>
<ul>
  <li>Use command <code class="language-plaintext highlighter-rouge">getdata("OBJECT_NAME", "PROPERTY_NAME")</code> to get a <code class="language-plaintext highlighter-rouge">rawdata</code> named “PROPERTY_NAME” from the object named “OBJECT_NAME”.</li>
  <li>Use command <code class="language-plaintext highlighter-rouge">getresult("OBJECT_NAME", "PROPERTY_NAME")</code> to get a <code class="language-plaintext highlighter-rouge">results</code> named “PROPERTY_NAME” from the object named “OBJECT_NAME”.</li>
  <li>Omit the parameter “PROPERTY_NAME” to get all.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mname</span> <span class="o">=</span> <span class="s">'profile'</span><span class="p">;</span>

<span class="c1"># rawdata
</span><span class="n">x</span> <span class="o">=</span> <span class="n">getdata</span><span class="p">(</span><span class="n">mname</span><span class="p">,</span> <span class="s">'x'</span><span class="p">);</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">getdata</span><span class="p">(</span><span class="n">mname</span><span class="p">,</span> <span class="s">'y'</span><span class="p">);</span>
<span class="n">Ex</span> <span class="o">=</span> <span class="n">getdata</span><span class="p">(</span><span class="n">mname</span><span class="p">,</span> <span class="s">'Ex'</span><span class="p">);</span>
<span class="n">Ey</span> <span class="o">=</span> <span class="n">getdata</span><span class="p">(</span><span class="n">mname</span><span class="p">,</span> <span class="s">'Ey'</span><span class="p">);</span>
<span class="n">Ez</span> <span class="o">=</span> <span class="n">getdata</span><span class="p">(</span><span class="n">mname</span><span class="p">,</span> <span class="s">'Ez'</span><span class="p">);</span>

<span class="c1"># results (equal)
</span><span class="n">E</span> <span class="o">=</span> <span class="n">getresult</span><span class="p">(</span><span class="n">mname</span><span class="p">,</span> <span class="s">'E'</span><span class="p">);</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">E</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">E</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
<span class="n">Ex</span> <span class="o">=</span> <span class="n">E</span><span class="p">.</span><span class="n">Ex</span><span class="p">;</span>
<span class="n">Ey</span> <span class="o">=</span> <span class="n">E</span><span class="p">.</span><span class="n">Ey</span><span class="p">;</span>
<span class="n">Ez</span> <span class="o">=</span> <span class="n">E</span><span class="p">.</span><span class="n">Ez</span><span class="p">;</span>
</code></pre></div></div>

<p>Commands for retrieving specific data from monitor:</p>
<ul>
  <li>Use command <code class="language-plaintext highlighter-rouge">getelectric("MONITOR_NAME")</code> to get the intensity of electric field from the monitor named “MONITOR_NAME”.</li>
  <li>Use command <code class="language-plaintext highlighter-rouge">getmagnetic("MONITOR_NAME")</code> to get the intensity of magnetic field from the monitor named “MONITOR_NAME”.</li>
  <li>Use command <code class="language-plaintext highlighter-rouge">transmission("MONITOR_NAME")</code> to get the fraction of power transmitted through the monitor named “MONITOR_NAME” with respect to the source power.</li>
</ul>

<p>Commands for retrieving data from parameter sweep, optimization, yield analysis, and S-parameter sweep objects:</p>
<ul>
  <li>Use command <code class="language-plaintext highlighter-rouge">getsweepdata("SWEEP_NAME", "PROPERTY_NAME")</code> to get a <code class="language-plaintext highlighter-rouge">rawdata</code> named “PROPERTY_NAME” from the Optimization and Sweeps object named “SWEEP_NAME”.</li>
  <li>Use command <code class="language-plaintext highlighter-rouge">getsweepresult("SWEEP_NAME")</code> to get a <code class="language-plaintext highlighter-rouge">result</code> named “PROPERTY_NAME” from the Optimization and Sweeps object named “SWEEP_NAME”.</li>
  <li>Omit the parameter “PROPERTY_NAME” to get all.</li>
</ul>

<p>Notes:</p>
<ul>
  <li>The sign of the transmission depends on the direction of propagation. The transmission is positive when the power is flowing through the monitor in the positive direction, that is in the +x, +y, or +z direction. So for a planewave propagating in backward (negative) direction, a negative transmission will be returned.</li>
</ul>

<h3 id="visualising-simulation-results">Visualising simulation results</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">plot</code> creates a line plot. All data sets in its argument should be sampled on the same position vector.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">:</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">10</span><span class="p">;</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>

<span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y1</span><span class="p">);</span>
<span class="c1"># &gt;
</span>
<span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="s">"x label"</span><span class="p">,</span> <span class="s">"y label"</span><span class="p">,</span> <span class="s">"title"</span><span class="p">);</span>
<span class="n">legend</span><span class="p">(</span><span class="s">"sin(x)"</span><span class="p">,</span> <span class="s">"cos(x)"</span><span class="p">);</span>
<span class="c1"># &gt;
</span>
<span class="c1"># Plotting options
</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="s">"x"</span><span class="p">,</span> <span class="s">"y"</span><span class="p">,</span> <span class="s">"title"</span><span class="p">,</span> <span class="s">"plot type = point, color = red, marker style = o"</span><span class="p">)</span>
<span class="c1"># &gt;
</span></code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">plotxy</code> allows us to use datasets that are sampled on different position vectors.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x1</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">x1</span><span class="p">);</span>
<span class="n">x2</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="n">pi</span><span class="p">,</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">pi</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">x2</span><span class="p">);</span>

<span class="n">plotxy</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="s">"x label"</span><span class="p">,</span> <span class="s">"y label"</span><span class="p">,</span> <span class="s">"title"</span><span class="p">);</span>
<span class="n">legend</span><span class="p">(</span><span class="s">"sin(x1)"</span><span class="p">,</span> <span class="s">"cos(x2)"</span><span class="p">)</span>
<span class="c1"># &gt;
</span></code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">polar</code> visualizes results in polar coordinates. All data sets must be sampled on the same array of angle values.</li>
  <li><code class="language-plaintext highlighter-rouge">polar2</code> adds multiple polar plots sampled on different angle values.</li>
  <li><code class="language-plaintext highlighter-rouge">image</code> creates 2D color plots.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">meshgridx</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">meshgridy</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
<span class="n">Z</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">X</span><span class="p">)</span> <span class="o">^</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">cos</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span> <span class="o">^</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">image</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="s">"x label"</span><span class="p">,</span> <span class="s">"y label"</span><span class="p">,</span> <span class="s">"title"</span><span class="p">);</span>
<span class="c1"># &gt;
</span></code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">polarimage</code> creates 2D polar image plots. The first two arguments should be a vector that can go from -1 to +1. When used with farfield projection commands, the first two arguments are associated with the direction cosine of the farfield - hence the limitations on the values they can accept.</li>
  <li>Use command <code class="language-plaintext highlighter-rouge">setplot</code> to get the properties can be set for current figure window.</li>
  <li>Use command <code class="language-plaintext highlighter-rouge">setplot("PROPERTY_NAME", VALUE)</code> to set the property named “PROPERTY_NAME” of the current figure window with value <code class="language-plaintext highlighter-rouge">VALUE</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">holdon</code> switches the plotting mode to hold multiple functions on the same figure.</li>
  <li><code class="language-plaintext highlighter-rouge">holdoff</code> switches off the holdon mode.</li>
  <li><code class="language-plaintext highlighter-rouge">selectfigure(NUMBER)</code> selects a figure with a specified figure number <code class="language-plaintext highlighter-rouge">NUMBER</code>. When used without any argument, it selects the last figure created.</li>
  <li><code class="language-plaintext highlighter-rouge">exportfigure("FILE_NAME", XRES, YRES)</code> exports the current figure to a JPG image with the name ‘filename’, the x resolution <code class="language-plaintext highlighter-rouge">XRES</code> and the y resolution <code class="language-plaintext highlighter-rouge">YRES</code>. If the x/y resolutions are not specified, the exported image will have the same size as the current figure.</li>
</ul>

<h2 id="file-io">File I/O</h2>
<h3 id="manipulating-project-files">Manipulating project files</h3>
<p>Commands:</p>
<ul>
  <li>Use command <code class="language-plaintext highlighter-rouge">newproject</code> without argument will create a new project based on the default template. You can also create a new simulation project based on another template with an argument, for instance to use materials from an existing simulation file.</li>
  <li>Use command <code class="language-plaintext highlighter-rouge">save("PATH_FILENAME")</code> to save the current simulation project in a file specified with “PATH_FILENAME”. You can specify a path, otherwise the file will be saved in the current directory. If you don’t specify the file name, a file browser window will open.</li>
  <li>Use command <code class="language-plaintext highlighter-rouge">load(PATH_FILENAME)</code> to load another project with “PATH_FILENAME”.</li>
</ul>

<h2 id="tips">Tips</h2>
<ul>
  <li><code class="language-plaintext highlighter-rouge">""</code> is equal to <code class="language-plaintext highlighter-rouge">''</code>.</li>
</ul>

<h2 id="reference">Reference</h2>
<h3 id="core">Core</h3>
<p>[1] Lumerical scripting language - Alphabetical list: https://optics.ansys.com/hc/en-us/articles/360034923553</p>

<p>[2] Lumerical scripting language - By category: https://optics.ansys.com/hc/en-us/articles/360037228834-Lumerical-scripting-language-By-category</p>

<p>[3] Scripting100 videos: https://www.bilibili.com/video/BV1hr4y1w7Ze?p=1&amp;vd_source=c24841bbb7f5d10925aeadfcbf43b52f</p>

<p>[4] Scripting100 transcripts: https://optics.ansys.com/hc/en-us/sections/360007813714-SCRIPTING100-List-of-videos</p>

<p><em>Note:</em></p>
<ul>
  <li>You can learn Scripting100 Course using Ref.[3] with Ref.[4].</li>
</ul>
